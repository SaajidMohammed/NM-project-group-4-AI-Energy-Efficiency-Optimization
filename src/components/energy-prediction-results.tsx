
// This is an autogenerated file from Firebase Studio.
"use client";

import type { EnergyPredictionOutput } from "@/ai/flows/energy-prediction-flow";
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
import { EnergyDisplayCard } from "./energy-display-card";
import { Zap } from "lucide-react";

interface EnergyPredictionResultsProps {
  result: EnergyPredictionOutput;
}

// Helper to parse numerical value from string like "150 kWh" or "150"
const parseEnergyValue = (energyString: string): number => {
  const match = energyString.match(/(\d+(\.\d+)?)/);
  return match ? parseFloat(match[1]) : 0;
};

export function EnergyPredictionResults({ result }: EnergyPredictionResultsProps) {
  const { predictedEnergyConsumption, confidenceLevel } = result;
  const energyValue = parseEnergyValue(predictedEnergyConsumption);
  // Extract unit if present, default to "units"
  const energyUnit = predictedEnergyConsumption.replace(/[\d\.\s,]/g, '') || "units";

  return (
    <Card className="w-full bg-card text-card-foreground shadow-xl">
      <CardHeader>
        <CardTitle className="text-2xl text-primary">Prediction Results</CardTitle>
        <CardDescription>
          Estimated energy consumption based on your inputs.
        </CardDescription>
      </CardHeader>
      <CardContent className="space-y-6">
        <EnergyDisplayCard
          title="Predicted Consumption"
          value={energyValue}
          unit={energyUnit}
          icon={Zap}
          description={`Confidence: ${confidenceLevel || "N/A"}`}
          colorClass="text-accent"
        />
      </CardContent>
    </Card>
  );
}

